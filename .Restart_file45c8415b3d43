setHook('rstudio.sessionInit', function(newSession) {
if (newSession) {
# message('Welcome to RStudio ', rstudioapi::getVersion())
}
ap <- rstudioapi::getActiveProject()
if (is.null(ap)) ap <- 'No active project'
message('This is now an RStudio project and SpaDES.project projectPath: ', ap)
message('attempting to re-open last active file (named test.R) ')
try(file.edit('C:/Eliot/GitHub/MPB/test.R'), silent = TRUE)
rstudioapi::navigateToFile('C:/Eliot/GitHub/MPB/test.R')
readLns <- readLines('C:/Eliot/GitHub/MPB/.Rprofile')
lineToDel <- grep('^.Restart_', readLns)
readLns <- readLns[-lineToDel]
cat(readLns, file = 'C:/Eliot/GitHub/MPB/.Rprofile', sep = '
')
unlink('C:/Eliot/GitHub/MPB/.Restart_file45c8415b3d43') # delete this file
}, action = 'append'
)
